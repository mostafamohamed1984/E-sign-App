var u=(i,o,a)=>new Promise((p,n)=>{var h=e=>{try{r(a.next(e))}catch(t){n(t)}},d=e=>{try{r(a.throw(e))}catch(t){n(t)}},r=e=>e.done?p(e.value):Promise.resolve(e.value).then(h,d);r((a=a.apply(i,o)).next())});import{c as g,e as j,r as l,j as s}from"./index-gCIvuc3j.js";const L=({refresh:i})=>{const o=g(j),[a,p]=l.useState([]),[n,h]=l.useState({});l.useEffect(()=>{u(void 0,null,function*(){try{const t=yield(yield fetch(`/api/method/esign_app.api.get_openssl_list?user_mail=${o}`,{method:"GET",headers:{"Content-Type":"application/json"}})).json();t.message.status===200&&p(t.message.data)}catch(e){console.error("Error fetching OpenSSL list",e)}})},[o,i]),l.useEffect(()=>{const r=()=>u(void 0,null,function*(){var t,x;const e={};for(const c of a)if(c.country)try{const m=((x=(t=(yield(yield fetch(`https://restcountries.com/v3.1/name/${c.country}`)).json())[0])==null?void 0:t.flags)==null?void 0:x.png)||"";m&&(e[c.country]=m)}catch(f){console.error("Error fetching flag for",c.country)}h(e)});a.length>0&&r()},[a]);const d=r=>{const e=r.match(/utctime-(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}.\d{6})/);if(e){const t=new Date(e[1]);return t.setFullYear(t.getFullYear()+1),t.toLocaleString()}return""};return s.jsx("div",{className:"relative mt-6 min-w-[1000px] max-w-[1000px] mx-auto",children:s.jsx("div",{className:"flex flex-wrap gap-5",children:a.map(r=>{const e=n[r.country],t=d(r.name);return s.jsxs("div",{className:"relative flex w-[200px] h-[100px]",children:[s.jsx("div",{className:"absolute top-2 right-2 cursor-pointer",children:s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-trash-2 text-red-600",children:[s.jsx("polyline",{points:"3 6 5 6 21 6"}),s.jsx("path",{d:"M19 6l-2 14H7L5 6"}),s.jsx("path",{d:"M10 11v6"}),s.jsx("path",{d:"M14 11v6"}),s.jsx("path",{d:"M18 4l-1-1h-8L7 4"})]})}),s.jsxs("div",{className:"bg-[#283C42] text-white rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300 cursor-pointer p-4 relative",style:{width:"200px",height:"100px"},children:[s.jsxs("h3",{className:"mt-2 font-bold text-ellipsis overflow-hidden whitespace-nowrap",children:[r.openssl_name," "]}),s.jsxs("p",{className:"text-sm text-gray-500 text-ellipsis overflow-hidden whitespace-nowrap",children:["ED: ",t," "]}),s.jsx("div",{className:"absolute bottom-2 right-2",children:e&&s.jsx("img",{src:e,alt:"Country Flag",className:"w-6 h-6 rounded-full object-cover"})})]})]},r.name)})})})};export{L as default};
