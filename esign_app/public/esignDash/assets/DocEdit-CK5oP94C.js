var Se=Object.defineProperty,_e=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var pe=(u,d,r)=>d in u?Se(u,d,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[d]=r,v=(u,d)=>{for(var r in d||(d={}))Ee.call(d,r)&&pe(u,r,d[r]);if(ue)for(var r of ue(d))Oe.call(d,r)&&pe(u,r,d[r]);return u},j=(u,d)=>_e(u,De(d));var H=(u,d,r)=>new Promise((S,E)=>{var y=p=>{try{C(r.next(p))}catch(_){E(_)}},F=p=>{try{C(r.throw(p))}catch(_){E(_)}},C=p=>p.done?S(p.value):Promise.resolve(p.value).then(y,F);C((r=r.apply(u,d)).next())});import{r as h,u as xe,j as t,k as Te,M as He}from"./index-gCIvuc3j.js";import{B,Y as I,Q as Me}from"./react-toastify.esm-DrxuvQyl.js";import"./PDFButton-Df9F1DBc.js";import{B as me,P as ze}from"./BlankPDF-DbxDs80c.js";import{p as Re,s as Fe}from"./GetPages-4-p1bfCZ.js";import{u as Pe,b as Be,a as Ie}from"./ButtonUtilities-Bim0ZjqU.js";import{R as We,e as $e}from"./extractUniqueElements-C7zGUSO9.js";import{M as Ae}from"./index-DgxSoOf0.js";import{S as Ue}from"./index-CFyLAb3w.js";import{d as se}from"./dayjsConfig-Dq5-b_tl.js";import"./PurePanel-CIr7AxRQ.js";import"./index-BhZcJFnL.js";function Le({owner_email:u,assigned_user:d,template_tite:r,document_title:S,setTarget:E,onClickSaveDoc:y}){const[F,C]=h.useState(!1),[p,_]=h.useState({}),[f,O]=h.useState(""),[D,z]=h.useState(`${S}-(${r})`),[l,M]=h.useState(""),[V,w]=h.useState(1),[W,$]=h.useState(!1),[A,J]=h.useState(""),[U,Y]=h.useState([]),[b,q]=h.useState(!0);h.useEffect(()=>{D&&l&&Object.keys(p).length>0?$(!0):$(!1)},[f,D,l,p]);const L=xe();h.useEffect(()=>{const o=d.reduce((x,N,R)=>(x[R]={email:N,status:"unseen"},x),{});_(o)},[d]),h.useEffect(()=>{H(this,null,function*(){try{const x=yield fetch('/api/resource/Email Template?fields=["name"]');if(!x.ok)throw new Error("Failed to fetch email templates");const N=yield x.json();Y(N.data)}catch(x){console.error("Error fetching email templates:",x)}finally{q(!1)}})},[]);const Q=()=>{if(f&&!Object.values(p).some(o=>o.email===f)){const o=Object.keys(p).length;_(j(v({},p),{[o]:{email:f,status:"unseen"}})),O("")}},G=()=>H(this,null,function*(){try{const o=yield fetch("/api/method/frappe.email.doctype.email_template.email_template.get_email_template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template_name:A,doc:{}})});if(!o.ok)throw new Error("Failed to fetch email template");const x=yield o.json();z(x.message.subject),M(x.message.message)}catch(o){console.error("Error fetching email template:",o)}}),K=o=>{const x=Object.keys(p).filter(N=>p[parseInt(N)].email!==o).reduce((N,R,ee)=>(N[ee]=p[parseInt(R)],N),{});_(x)},X=()=>{E(null),C(!0)},Z=()=>H(this,null,function*(){C(!1);const o={to:JSON.stringify(p,null,2),subject:D,body:l,document_name:S,user_mail:u,isChecked:V};try{(yield(yield fetch("/api/method/esign_app.api.send_document_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json()).message.status<300?(y(),B.success("Document Assigned Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:I}),setTimeout(()=>{L("/documents")},2e3)):B.error("Error While Sending Document...",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:I})}catch(x){B.error("Server Error, Please Try Again...",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:I})}});return t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:X,children:"Send Document"}),t.jsx(Ae,{title:"Send Document",open:F,onCancel:()=>C(!1),footer:null,width:"60vh",children:t.jsxs("div",{className:"bg-[#283C42] text-white p-6 rounded-md shadow-md max-w-lg mx-auto",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-semibold mb-1",children:"From:"}),t.jsx("input",{type:"email",value:u,disabled:!0,className:"w-full px-3 py-2 rounded bg-gray-300 text-gray-700 cursor-not-allowed text-xs"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-semibold mb-1",children:"To:"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("input",{type:"email",placeholder:"Add email",value:f,onChange:o=>O(o.target.value),className:"w-full px-3 py-2 rounded bg-white text-black text-xs"}),t.jsx("button",{type:"button",onClick:Q,className:"bg-[#283C42] text-white px-3 py-2 rounded text-xs font-semibold",children:"Add"})]}),t.jsx("div",{className:"mt-2 max-h-24 overflow-y-auto",children:t.jsx("ul",{children:Object.keys(p).map(o=>t.jsxs("li",{className:"flex justify-between items-center bg-white text-black text-xs px-3 py-2 rounded mb-1",children:[t.jsx("span",{children:p[parseInt(o)].email}),t.jsx("button",{type:"button",onClick:()=>K(p[parseInt(o)].email),className:"text-red-500 text-xs font-semibold",children:"Remove"})]},o))})})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"text-xs font-semibold mb-1",children:"Select Template:"}),t.jsxs("div",{className:"flex items-center gap-2 w-full",children:[t.jsx(Ue,{showSearch:!0,value:A,onChange:o=>J(o),filterOption:(o,x)=>x?x.label.toLowerCase().includes(o.toLowerCase()):!1,options:U.map(o=>({label:o.name,value:o.name})),className:"flex-1"}),t.jsx("button",{type:"button",onClick:G,className:"bg-white text-[#283C42] px-4 py-2 rounded text-xs",children:"Load Template"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-semibold mb-1",children:"Title:"}),t.jsx("input",{type:"text",value:D,onChange:o=>z(o.target.value),className:"w-full px-3 py-2 bg-white text-black text-xs"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-semibold mb-1",children:"Description:"}),t.jsx("div",{className:"bg-white text-black p-2 rounded",children:t.jsx(We,{theme:"snow",value:l,onChange:M})})]}),t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("button",{type:"submit",onClick:Z,className:`bg-white text-[#283C42] px-4 py-2 rounded-md font-semibold text-xs ${W?"cursor-pointer":"cursor-not-allowed"}`,disabled:!W,children:"Send"})})]})})]})}const rt=()=>{var oe,de,ce,he;const[u,d]=h.useState([]),[r,S]=h.useState(null),[E,y]=h.useState(null),[F,C]=h.useState(""),[p,_]=h.useState(""),[f,O]=h.useState(0);h.useState(null);const[D,z]=h.useState(me),[l,M]=h.useState(null),V=h.useRef(null),w=h.useRef(null),W=h.useRef(null),$=Te(),[A,J]=h.useState(null),[U,Y]=h.useState([]),{documentData:b}=$.state||{},q=xe();if(!b)return t.jsx("p",{children:"Document not found"});h.useEffect(()=>{var e;if(r!==null){const s=u.find(a=>a.id===r);M(s?{id:s.id,type:s.type,checked:(e=s.checked)!=null?e:!1,content:s.content}:null)}},[r,E,u]),h.useEffect(()=>{H(void 0,null,function*(){try{const a=yield(yield fetch(`/api/method/esign_app.api.get_document_components_and_basepdf?document_name=${b?b.name:""}`)).json();if(a.message.document_json_data==null||a.message.base_pdf_datad==null)return;if(a.message.status===200){const i=typeof a.message.document_json_data=="string"?JSON.parse(a.message.document_json_data):a.message.document_json_data,n=typeof a.message.base_pdf_datad=="string"?JSON.parse(a.message.base_pdf_datad):a.message.base_pdf_datad;d(i),z(n)}}catch(s){console.error("Error:",s)}}),L()},[]);const L=()=>{const e=$e(u);Y(e)};h.useEffect(()=>{L()},[u]);const Q={name:"editable",props:[],events:[],render(e,s){const a=e.getRect(),{pos2:i}=e.state,n=e.useCSS("div",`
        {
            position: absolute;
            left: 0px;
            top: 0px;
            will-change: transform;
            transform-origin: 0px 0px;
        }
        .custom-button {
            width: 24px;
            height: 24px;
            margin-bottom: 4px;
            background: #283C42;
            border-radius: 4px;
            appearance: none;
            border: 0;
            color: white;
            font-weight: bold;
        }
            `);return t.jsxs(n,{className:"moveable-editable",style:{transform:`translate(${i[0]}px, ${i[1]}px) rotate(${a.rotation}deg) translate(10px)`},children:[t.jsx("button",{className:"w-6 h-6 mb-1 p-1 bg-[#283C42] rounded border-none text-white font-bold",onClick:ne,children:t.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",height:"1em",width:"1em",children:t.jsx("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"})})}),t.jsx("button",{className:"w-6 h-6 mb-1 p-1 bg-[#283C42] rounded border-none text-white font-bold",onClick:()=>{r!==null?ye(r):C("")},children:t.jsxs("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",height:"1em",width:"1em",children:[t.jsx("defs",{children:t.jsx("style",{})}),t.jsx("path",{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6c-.3 1.5-.4 3-.4 4.4 0 14.4 11.6 26 26 26h723c1.5 0 3-.1 4.4-.4 14.2-2.4 23.7-15.9 21.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"})]})})]},"editable-viewer")}},G=()=>{f<D.length-1&&(O(f+1),y(null),S(null))},K=()=>{f>0&&(O(f-1),y(null),S(null))},X=e=>{_(e.target.value)},Z=()=>{r!==null&&p.trim()!==""&&(d(e=>e.map(s=>s.id===r?j(v({},s),{assign:[...s.assign||[],p]}):s)),_(""))},o=(e,s)=>{const{type:a,value:i,files:n}=e.target;d(c=>c.map(m=>{if(m.id!==s)return m;switch(m.type){case"text":return j(v({},m),{content:i,value:i});case"image":case"v_image":if(n&&n[0]){const g=new FileReader;g.onloadend=()=>{d(k=>k.map(T=>T.id===s?j(v({},T),{content:g.result}):T))},g.readAsDataURL(n[0])}return m;case"checkbox":return j(v({},m),{checked:e.target.checked});case"m_date":case"live_date":case"fix_date":return j(v({},m),{content:i});default:return m}}))},x=e=>{r!==null&&d(s=>s.map(a=>a.id===r?j(v({},a),{assign:(a.assign||[]).filter(i=>i!==e)}):a))};function N(...e){return s=>{e.forEach(a=>{typeof a=="function"?a(s):a&&"current"in a&&(a.current=s)})}}const R=(e,s)=>{const a=e.target.value;d(i=>i.map(n=>n.id===s?j(v({},n),{content:a,value:a}):n))},ee=({type:e,onClick:s,children:a,title:i})=>{const[{isDragging:n},c]=Ie(()=>({type:"component",item:{type:e},collect:k=>({isDragging:!!k.isDragging()})}),[e]),[m,g]=h.useState(!1);return t.jsx("div",{className:"relative inline-block",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:t.jsx("button",{ref:c,className:`flex justify-center items-center w-[100%] h-[50px] bg-[#283C42] text-white px-4 py-2 cursor-grab rounded border-2 border-transparent transition-transform duration-500 ease-in-out ${n?"shiny-button":""}`,onClick:s,children:t.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:t.jsxs("div",{className:`flip-container ${m?"hovered":""}`,children:[t.jsx("div",{className:"flip-front",children:a}),t.jsx("div",{className:"flip-back",children:t.jsx("span",{children:i})})]})})})})},[,ge]=Pe(()=>({accept:"component",drop:(e,s)=>{const a=s.getClientOffset();if(w.current&&a){const i=w.current.getBoundingClientRect(),n={top:a.y-i.top-20,left:a.x-i.left-50};O(c=>(console.log(c,"WWWWWW"),ae(e.type,n,c),c))}}})),ae=(e,s,a)=>{const i={text:{width:100,height:30},v_text:{width:100,height:30},signature:{width:100,height:50},v_signature:{width:100,height:50},image:{width:80,height:80},v_image:{width:80,height:80},checkbox:{width:30,height:30},m_date:{width:100,height:30},live_date:{width:100,height:30},fix_date:{width:100,height:30}},n={id:Date.now(),type:e,pageNo:a,name:`${e}-${Date.now()}`,position:s,size:i[e]||{width:0,height:0},fontSize:e==="text"?14:void 0,value:"",assign:[],content:e==="text"?"":void 0,checked:!1};d(c=>[...c,n])},fe=(e,s,a)=>{d(i=>i.map(n=>n.id===e?j(v({},n),{position:{top:s,left:a}}):n))},re=(e,s,a)=>{d(i=>i.map(n=>n.id===e?j(v({},n),{size:{width:s,height:a}}):n))},be=e=>{const s=e.target.value;C(s),r!==null&&d(a=>a.map(i=>i.id===r?j(v({},i),{content:s,value:s}):i))},ve=e=>{e.target.closest(".component")||(S(null),y(null))},ie=e=>{r!==null&&d(s=>s.map(a=>a.id===r?j(v({},a),{fontSize:(a.fontSize||16)+(e?2:-2)}):a))},ne=()=>{r!==null&&(d(e=>e.filter(s=>s.id!==r)),S(null),y(null))},je=()=>H(void 0,null,function*(){try{O(0),d([]),z(me)}catch(e){console.error("Error loading data:",e)}}),we=e=>H(void 0,null,function*(){var a;const s=(a=e.target.files)==null?void 0:a[0];if(s){const i=yield Re(s),n=yield Fe(i);z(n),J(s?s.name:null),O(0)}});h.useEffect(()=>{if(r!==null){const e=document.querySelector(`[data-id="${r}"]`);y(e);const s=u.find(a=>a.id===r);(s==null?void 0:s.type)==="text"&&C(s.content||"")}},[r,u]),h.useEffect(()=>{if(r!==null){const e=u.find(s=>s.id===r);M(e?{id:e.id,type:e.type,checked:e.checked||!1,content:e.content||""}:null)}},[r,E,u]);const ye=e=>{d(s=>s.map(a=>a.id===e?j(v({},a),{content:void 0,value:void 0}):a))},Ce=(e,s)=>{var i;const a=(i=e.target.files)==null?void 0:i[0];if(a){const n=new FileReader;n.onloadend=()=>{const c=n.result;d(m=>m.map(g=>g.id===s?j(v({},g),{content:c}):g))},n.readAsDataURL(a)}},le=()=>H(void 0,null,function*(){if(!b||!b.document_title)return;const e=u.map(({id:i,type:n,content:c,pageNo:m,value:g,position:k,size:T,name:P,fontSize:te,assign:Ne,checked:ke})=>({id:i,type:n,pageNo:m,assign:Ne,size:T,name:P,fontSize:te,position:k,content:c,value:g,checked:ke})),s=U.reduce((i,n,c)=>{const m=String(n);return i[c]={email:m,status:"unseen"},i},{}),a={document_title:b.name,document_json_data:JSON.stringify(JSON.stringify(e,null,2)),base_pdf_datad:JSON.stringify(JSON.stringify(D,null,2)),assigned_user_list:JSON.stringify(s,null,2)};try{(yield(yield fetch("/api/method/esign_app.api.update_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json()).message.status<300?B.success("Document Updated Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:I}):B.error("Error while updating template",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:I})}catch(i){console.error("Error:",i),alert("An error occurred while updating the template")}y(null)});return b?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-xs flex items-center gap-3 relative p-6 bg-[#283C42] text-white border-2 border-transparent hover:border-[#283C42] transition-colors duration-300",children:[t.jsx("button",{className:"button",onClick:()=>q(-1),children:t.jsxs("div",{className:"button-box",children:[t.jsx("span",{className:"button-elem",children:t.jsx("svg",{viewBox:"0 0 46 40",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M46 20.038c0-.7-.3-1.5-.8-2.1l-16-17c-1.1-1-3.2-1.4-4.4-.3-1.2 1.1-1.2 3.3 0 4.4l11.3 11.9H3c-1.7 0-3 1.3-3 3s1.3 3 3 3h33.1l-11.3 11.9c-1 1-1.2 3.3 0 4.4 1.2 1.1 3.3.8 4.4-.3l16-17c.5-.5.8-1.1.8-1.9z"})})}),t.jsx("span",{className:"button-elem",children:t.jsx("svg",{viewBox:"0 0 46 40",children:t.jsx("path",{d:"M46 20.038c0-.7-.3-1.5-.8-2.1l-16-17c-1.1-1-3.2-1.4-4.4-.3-1.2 1.1-1.2 3.3 0 4.4l11.3 11.9H3c-1.7 0-3 1.3-3 3s1.3 3 3 3h33.1l-11.3 11.9c-1 1-1.2 3.3 0 4.4 1.2 1.1 3.3.8 4.4-.3l16-17c.5-.5.8-1.1.8-1.9z"})})})]})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-lg font-bold",children:b.document_title}),t.jsx("p",{className:"text-sm",children:b.template_title}),t.jsxs("p",{className:"text-sm",children:["Created by: ",b.owner_email]}),t.jsxs("p",{className:"text-sm",children:["Created At: ",se(b.document_created_at).format("DD/MM/YYYY - HH:mm")," (",se().to(se(b.document_created_at)),")"]})]})]}),t.jsxs("div",{className:"templete-main-div relative",children:[t.jsxs("div",{className:"left-area-div h-fit sticky top-0",children:[t.jsxs("div",{className:"control-buttons gap-2 text-xs",children:[t.jsx("input",{type:"file",accept:"application/pdf",onChange:we,className:"hidden",id:"file-upload"}),t.jsx("label",{htmlFor:"file-upload",className:"items-center content-center space-x-2 bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300 cursor-pointer grid place-items-center",children:t.jsx("span",{children:A?"Change File":"Upload PDF"})}),t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:je,children:"Load Blank Page"}),t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:le,children:"Save Document"}),t.jsx(Le,{setTarget:y,onClickSaveDoc:le,owner_email:b.owner_email,assigned_user:U.map(String),template_tite:b.template_title,document_title:b.name})]}),t.jsx("div",{className:"control-buttons-utilities gap-2 text-xs",children:Be.map(({type:e,icon:s,title:a})=>t.jsx(ee,{type:e,title:a,onClick:()=>ae(e,{top:100,left:100},f),children:s},e))})]}),t.jsxs("div",{className:"templete-app text-xs",children:[t.jsxs("div",{className:"flex gap-3 mb-2",children:[t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:K,disabled:f===0,children:"Previous"}),t.jsxs("h1",{className:"mt-2",children:[f+1," / ",D.length]}),t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:G,disabled:f===D.length-1,children:"Next"})]}),t.jsxs("div",{className:"workspace",ref:N(w,ge),onClick:ve,children:[t.jsx(ze,{pdfData:D[f].data}),u.filter(e=>e.pageNo===f).map(e=>{var s,a,i,n;return t.jsxs("div",{"data-id":e.id,className:`component ${e.type} ${r===e.id?"selected":""}`,style:{position:"absolute",top:e.position.top,left:e.position.left,width:(a=(s=e.size)==null?void 0:s.width)!=null?a:0,height:(n=(i=e.size)==null?void 0:i.height)!=null?n:0,border:r===e.id?"1px solid red":"none",fontSize:`${e.fontSize}px`,userSelect:"none",overflow:"hidden"},onClick:c=>{c.stopPropagation(),S(e.id)},children:[e.type==="text"&&t.jsx("div",{style:{width:"100%",height:"100%",overflow:"hidden",fontSize:"inherit",outline:"none"},children:e.value||"Editable Text"}),e.type==="image"&&!e.content&&t.jsx("div",{}),e.type==="v_image"&&!e.content&&t.jsx("div",{}),(e.type==="image"||e.type==="v_image"||e.type==="signature"||e.type==="v_signature")&&e.content&&t.jsx("img",{src:e.content,alt:"Uploaded",style:{width:"100%",height:"100%"}}),e.type==="checkbox"&&t.jsx("input",{type:"checkbox",checked:e.checked||!1,onChange:c=>o(c,e.id)}),e.type==="m_date"&&t.jsx("input",{type:"date",value:e.content||"",onChange:c=>o(c,e.id),readOnly:!0}),e.type==="live_date"&&t.jsx("input",{type:"date",value:new Date().toISOString().split("T")[0],onChange:c=>o(c,e.id),readOnly:!0}),e.type==="fix_date"&&t.jsx("input",{type:"date",value:e.content||"",onChange:c=>o(c,e.id)}),e.type==="v_text"&&t.jsx("div",{children:e.content||"Editable Text"})]},e.id)}),t.jsx(He,{ref:V,target:E,resizable:!0,draggable:!0,ables:[Q],props:{editable:!0},bounds:{left:0,top:0,right:((oe=w.current)==null?void 0:oe.offsetWidth)||0,bottom:((de=w.current)==null?void 0:de.offsetHeight)||0},onDrag:e=>{var g,k;const s=((g=w.current)==null?void 0:g.offsetWidth)||0,a=((k=w.current)==null?void 0:k.offsetHeight)||0,i=e.target.clientWidth||0,n=e.target.clientHeight||0,c=Math.max(0,Math.min(e.top,a-n)),m=Math.max(0,Math.min(e.left,s-i));r!==null&&fe(r,c,m)},onResize:e=>{var c,m;const s=((c=w.current)==null?void 0:c.offsetWidth)||0,a=((m=w.current)==null?void 0:m.offsetHeight)||0,i=Math.max(0,Math.min(e.width,s)),n=Math.max(0,Math.min(e.height,a));e.target.style.width=`${i}px`,e.target.style.height=`${n}px`,r!==null&&re(r,i,n)},onScale:e=>{var n,c,m,g,k,T;const s=((n=w.current)==null?void 0:n.offsetWidth)||0,a=((c=w.current)==null?void 0:c.offsetHeight)||0,i=u.find(P=>P.id===r);if(i){const P=Math.max(0,Math.min((g=(m=i.size)==null?void 0:m.width)!=null?g:1*e.scale[0],s)),te=Math.max(0,Math.min((T=(k=i.size)==null?void 0:k.height)!=null?T:1*e.scale[1],a));re(r,P,te)}}})]})]}),t.jsxs("div",{className:"right-templete h-fit sticky top-14",children:[t.jsxs("div",{className:"templete-utility-btn mt-2 text-xs pr-20",children:[r&&((l==null?void 0:l.type)==="image"||(l==null?void 0:l.type)==="v_image")&&t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:e=>Ce(e,r),className:"hidden",id:"image-upload"}),t.jsxs("label",{htmlFor:"image-upload",className:"flex items-center space-x-2 bg-[#283C42] text-white px-4 py-1 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300 cursor-pointer",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),t.jsx("span",{children:"Upload Image"})]})]}),r&&(l==null?void 0:l.type)==="m_date"&&t.jsx("input",{type:"date",value:l.content||"",onChange:e=>R(e,r)}),r&&(l==null?void 0:l.type)==="live_date"&&t.jsx("input",{type:"date",value:new Date().toISOString().split("T")[0],readOnly:!0}),r&&(l==null?void 0:l.type)==="fix_date"&&t.jsx("input",{type:"date",value:l.content||"",onChange:e=>R(e,r)}),r&&((l==null?void 0:l.type)==="text"||(l==null?void 0:l.type)==="v_text")&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:()=>ie(!0),children:"Increase Text Size"}),t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:()=>ie(!1),children:"Decrease Text Size"}),t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:ne,children:"Delete Component"}),t.jsx("input",{className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none",ref:W,type:"text",value:F,onChange:be,placeholder:"Edit text here"})]})]}),r&&(l==null?void 0:l.type)!=="v_text"&&(l==null?void 0:l.type)!=="v_signature"&&(l==null?void 0:l.type)!=="v_image"&&(l==null?void 0:l.type)!=="fix_date"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"templete-utility-btn-add-user flex m-3 gap-3 text-xs pr-10 ml-0",children:[t.jsx("input",{className:"mt-3 bg-[#d1e0e4]  text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none",type:"text",value:p,onChange:X,placeholder:"Add user"}),t.jsx("button",{className:"mt-3  bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:Z,children:"Add"})]}),t.jsx("div",{children:t.jsx("ul",{className:"list-none p-0 m-0 pr-10",children:(he=(ce=u.find(e=>e.id===r))==null?void 0:ce.assign)==null?void 0:he.map((e,s)=>t.jsxs("li",{className:"mr-3 flex items-center justify-between p-2 border-b border-gray-200 hover:bg-gray-100",children:[t.jsx("span",{className:"text-xs text-gray-800 overflow-hidden ",children:e}),t.jsx("button",{onClick:()=>x(e),className:"flex items-center justify-center w-8 h-8 bg-red-500 text-white rounded-full hover:bg-red-600","aria-label":"Remove user",children:t.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",height:"1em",width:"1em",children:t.jsx("path",{d:"M678.3 655.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 518 759.6 444.7 759.6 362c0-137-110.8-248-247.5-248S264.7 225 264.7 362c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 901.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 641.2 432.2 610 512.2 610c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 534c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 362c0-45.9 17.9-89.1 50.3-121.6S466.3 190 512.2 190s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 362c0 45.9-17.9 89.1-50.3 121.6C601.1 516.1 558 534 512.2 534zM880 772H640c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"})})})]},s))})})]})]})]}),t.jsx(Me,{limit:1})]}):t.jsx("div",{children:"No Doc data available"})};export{rt as default};
