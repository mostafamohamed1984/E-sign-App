var x=(g,m,l)=>new Promise((p,n)=>{var h=r=>{try{i(l.next(r))}catch(u){n(u)}},d=r=>{try{i(l.throw(r))}catch(u){n(u)}},i=r=>r.done?p(r.value):Promise.resolve(r.value).then(h,d);i((l=l.apply(g,m)).next())});import{r as c,u as w,b as y,j as e,g as f}from"./index-KGhxS471.js";import{Q as C,B as a,Y as t}from"./react-toastify.esm-BKLUMPPl.js";function O(){const[g,m]=c.useState(""),[l,p]=c.useState(""),[n,h]=c.useState(""),d=w(),i=()=>x(this,null,function*(){try{if(n==""||n==null||n==null){a.error("Enter Password",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:t});return}const s=yield(yield fetch("/api/method/esign_app.api.create_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:g,email:l,password:n})})).json();if(s.message.status<=299)a.success("User Registered Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:t}),setTimeout(()=>{d("/login")},1600);else{if(console.error("Error creating user here data:",s,"data message ened"),s.message&&s.message.message.includes("Duplicate entry")){a.error("User Email Already Exist",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:t});return}if(s.message&&s.message.message.includes("Avoid sequences like abc or 6543 ")){a.error("Avoid sequences like abc & 123",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:t});return}if(s.message&&s.message.message.includes("top-10 common password")){a.error("Very Common Password Security Alert",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:t});return}if(s.message&&s.message.message.includes("similar to a commonly used password")){a.error("Common Password Security Alert",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:t});return}if(s.message&&s.message.message.includes("Better add a few more letters or another word")){a.error("Password Is not secured",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:t});return}if(s.message&&s.message.message.includes("not a valid Email Address")){a.error("Not a valid Email Address",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:t});return}if(s.message&&s.message.message.includes("Capitalization doesn't help very much")){a.error("Use Special Symbols and Digits as well",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:t});return}if(s.message&&s.message.message.includes("Not a valid Email Address")){a.error("Enter valid Email",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:t});return}if(console.log("----------> Before",s.message),s.message&&s.message.message.includes("first_name")&&s.message.status===500){console.log("----------> Inside"),a.error("Enter Username",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:t});return}console.log("----------> After"),a.error("User Creation Error",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:t})}}catch(o){console.error("Error creating user:",o),alert("Failed to create user. Please try again.")}}),r=c.useRef(null),u=()=>{f.to(r.current,{x:"100%",opacity:0,duration:.5,ease:"power2.inOut",onComplete:()=>d("/")})},b=()=>{f.to(r.current,{x:"100%",opacity:0,duration:.5,ease:"power2.inOut",onComplete:()=>d("/login")})};return y(()=>{f.from(r.current,{x:"100%",opacity:0,duration:.5,ease:"power2.inOut"})}),c.useEffect(()=>{const o=s=>{s.key==="Enter"&&i()};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[l,n]),e.jsxs("div",{className:"h-screen w-screen flex items-center justify-center",children:[e.jsxs("div",{ref:r,className:"flex flex-col lg:flex-row bg-white rounded-lg shadow-lg overflow-hidden max-w-sm lg:max-w-4xl w-full",children:[e.jsx("div",{className:"hidden lg:block lg:w-1/2 bg-cover bg-center",style:{backgroundImage:"url('https://images.pexels.com/photos/5273563/pexels-photo-5273563.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1')"}}),e.jsxs("div",{className:"w-full lg:w-1/2 p-8",children:[e.jsx("div",{className:"relative p-4",children:e.jsx("button",{onClick:u,className:"absolute top-2 right-2 rounded-full bg-[#d1e0e4] p-1 hover:bg-[#a2c1ca]",children:e.jsx("svg",{className:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M14.348 5.652a.5.5 0 01.707.707l-9.9 9.9a.5.5 0 11-.707-.707l9.9-9.9zM5.653 5.652a.5.5 0 00-.707.707l9.9 9.9a.5.5 0 00.707-.707l-9.9-9.9z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("span",{className:"border-b w-1/5 lg:w-1/4"}),e.jsx("p",{className:"text-xs text-center text-gray-500 uppercase",children:"or Signup with email"}),e.jsx("span",{className:"border-b w-1/5 lg:w-1/4"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Full Name"}),e.jsx("input",{className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none",type:"text",value:g,onChange:o=>m(o.target.value)})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email Address"}),e.jsx("input",{className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none",type:"email",value:l,onChange:o=>{const v=o.target.value.replace(/[^a-zA-Z0-9@._]/g,"");p(v)}})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"})}),e.jsx("input",{className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none",type:"password",value:n,onChange:o=>h(o.target.value)})]}),e.jsx("div",{className:"mt-8",children:e.jsx("button",{onClick:i,className:"bg-[#283C42] text-white font-bold py-2 px-4 w-full rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",children:"Create an Account"})}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("span",{className:"border-b w-1/5 md:w-1/4"}),e.jsx("p",{onClick:b,className:"cursor-pointer text-xs text-gray-500 uppercase",children:"Already Have an Account"}),e.jsx("span",{className:"border-b w-1/5 md:w-1/4"})]})]})]}),e.jsx(C,{limit:1})]})}export{O as default};
