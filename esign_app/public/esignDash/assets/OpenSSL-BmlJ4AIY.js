const __vite__fileDeps=["assets/OpenSSLAllList-DpBqD0MB.js","assets/index-KGhxS471.js","assets/index-L1PRZx9V.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var D=Object.defineProperty,F=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var L=(a,t,o)=>t in a?D(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,g=(a,t)=>{for(var o in t||(t={}))M.call(t,o)&&L(a,o,t[o]);if(O)for(var o of O(t))R.call(t,o)&&L(a,o,t[o]);return a},f=(a,t)=>F(a,B(t));var w=(a,t,o)=>new Promise((n,u)=>{var y=l=>{try{m(o.next(l))}catch(x){u(x)}},j=l=>{try{m(o.throw(l))}catch(x){u(x)}},m=l=>l.done?n(l.value):Promise.resolve(l.value).then(y,j);m((o=o.apply(a,t)).next())});import{r as c,c as E,i as T,e as V,j as e,_ as H}from"./index-KGhxS471.js";import{Q as I,B as S,Y as N}from"./react-toastify.esm-BKLUMPPl.js";import{M as J}from"./index-BiBOpQiF.js";import"./PurePanel-Cd8gYiFl.js";const Q=({onAdd:a})=>{const[t,o]=c.useState(!1),[n,u]=c.useState({country:"",state:"",location:"",organization:"",challenge_password:"",countryCode:"",username:"",email:"",openssl_name:""}),[y,j]=c.useState([]),[m,l]=c.useState([]),[x,b]=c.useState(!1),v=E(T),C=E(V);c.useEffect(()=>{u(r=>f(g({},r),{username:v,email:C}));function s(){return w(this,null,function*(){try{const d=(yield(yield fetch("https://restcountries.com/v3.1/all?fields=name,cca2")).json()).map(i=>({name:i.name.common,code:i.cca2})).sort((i,A)=>i.name.localeCompare(A.name));j(d),l(d)}catch(r){S.error("Error fetching countries!",{transition:N})}})}s()},[v,C]);const P=()=>{o(!0)},k=()=>{u({country:"",state:"",location:"",organization:"",challenge_password:"",countryCode:"",username:v,email:C,openssl_name:""})},_=()=>{o(!1),k()},z=()=>w(void 0,null,function*(){b(!0),console.log(n);try{const r=yield(yield fetch("/api/method/esign_app.api.genrate_and_store_keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();console.log(r),r.message.status<300?(S.success("OpenSSL created Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:N}),a(),o(!1),b(!1),k()):(S.error("Error while creating OpenSSL",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:N}),b(!0))}catch(s){console.error("Error:",s),alert("An error occurred while saving the templete")}b(!1)}),p=s=>{const{name:r,value:h}=s.target;if(!(r==="challenge_password"&&!/^[A-Za-z0-9]*$/.test(h))&&(u(d=>f(g({},d),{[r]:h})),r==="country")){const d=y.find(i=>i.name===h);u(i=>f(g({},i),{countryCode:d?d.code:""}))}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:P,children:"Add OpenSSL"})}),e.jsx(J,{title:"Add Template",open:t,onCancel:_,footer:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{disabled:x,className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:z,children:"Save"},"save-button"),e.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#ca2424] hover:bg-white hover:text-[#ca2424] transition-colors duration-300",onClick:_,children:"Cancel"},"cancel-button")]},"footer-buttons")],children:e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Country"}),e.jsxs("select",{name:"country",value:n.country,onChange:p,className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none",children:[e.jsx("option",{value:"",children:"Select Country"}),m.map(s=>e.jsx("option",{value:s.name,children:s.name},s.code))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Country Code"}),e.jsx("input",{type:"text",name:"countryCode",value:n.countryCode,readOnly:!0,className:"bg-gray-200 text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"OpenSSL Name"}),e.jsx("input",{type:"text",name:"openssl_name",value:n.openssl_name,onChange:p,className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"State/Province"}),e.jsx("input",{type:"text",name:"state",value:n.state,onChange:p,className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:n.location,onChange:p,className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Organization"}),e.jsx("input",{type:"text",name:"organization",value:n.organization,onChange:p,className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Challenge Password"}),e.jsx("input",{type:"text",name:"challenge_password",value:n.challenge_password,onChange:p,placeholder:"Ex. Pass123",className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Username"}),e.jsx("input",{type:"text",name:"username",value:n.username,readOnly:!0,className:"bg-gray-200 text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),e.jsx("input",{type:"text",name:"email",value:n.email,readOnly:!0,className:"bg-gray-200 text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]})]})}),e.jsx(I,{limit:1})]})},U=c.lazy(()=>H(()=>import("./OpenSSLAllList-DpBqD0MB.js"),__vite__mapDeps([0,1,2])));function K(){const[a,t]=c.useState(!1),o=()=>{t(n=>!n)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(Q,{onAdd:o})}),e.jsx("div",{children:e.jsx(c.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(U,{refresh:a})})})]})}export{K as default};
