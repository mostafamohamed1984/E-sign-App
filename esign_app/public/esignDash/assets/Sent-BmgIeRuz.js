var se=(e,r,a)=>new Promise((t,s)=>{var i=l=>{try{c(a.next(l))}catch(f){s(f)}},n=l=>{try{c(a.throw(l))}catch(f){s(f)}},c=l=>l.done?t(l.value):Promise.resolve(l.value).then(i,n);c((a=a.apply(e,r)).next())});import{r as u,j as o,c as Ae,e as ke}from"./index-KGhxS471.js";import{d as A}from"./dayjsConfig-BCsMCC7i.js";import{i as Ie,a as Me,c as Ee,M as Ve}from"./index-BiBOpQiF.js";import{e as H,w as Le,j as De,_ as ze,b as ee,g as Be,m as ie,r as Ye,v as oe,C as le,u as He,i as Xe,N as We,x as qe,y as Ue,z as Fe,A as Ze}from"./PurePanel-Cd8gYiFl.js";import{T as Je}from"./index-CA_AyjUL.js";import{S as ce}from"./index-BN2Fi2L7.js";const U=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function Qe(e,r){return U.reduce((a,t)=>{const s=e[`${t}1`],i=e[`${t}3`],n=e[`${t}6`],c=e[`${t}7`];return Object.assign(Object.assign({},a),r(t,{lightColor:s,lightBorderColor:i,darkColor:n,textColor:c}))},{})}function ue(e){var r=e.children,a=e.prefixCls,t=e.id,s=e.overlayInnerStyle,i=e.className,n=e.style;return u.createElement("div",{className:H("".concat(a,"-content"),i),style:n},u.createElement("div",{className:"".concat(a,"-inner"),id:t,role:"tooltip",style:s},typeof r=="function"?r():r))}var L={shiftX:64,adjustY:1},D={adjustX:1,shiftY:!0},O=[0,0],Ge={left:{points:["cr","cl"],overflow:D,offset:[-4,0],targetOffset:O},right:{points:["cl","cr"],overflow:D,offset:[4,0],targetOffset:O},top:{points:["bc","tc"],overflow:L,offset:[0,-4],targetOffset:O},bottom:{points:["tc","bc"],overflow:L,offset:[0,4],targetOffset:O},topLeft:{points:["bl","tl"],overflow:L,offset:[0,-4],targetOffset:O},leftTop:{points:["tr","tl"],overflow:D,offset:[-4,0],targetOffset:O},topRight:{points:["br","tr"],overflow:L,offset:[0,-4],targetOffset:O},rightTop:{points:["tl","tr"],overflow:D,offset:[4,0],targetOffset:O},bottomRight:{points:["tr","br"],overflow:L,offset:[0,4],targetOffset:O},rightBottom:{points:["bl","br"],overflow:D,offset:[4,0],targetOffset:O},bottomLeft:{points:["tl","bl"],overflow:L,offset:[0,4],targetOffset:O},leftBottom:{points:["br","bl"],overflow:D,offset:[-4,0],targetOffset:O}},Ke=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],et=function(r,a){var t=r.overlayClassName,s=r.trigger,i=s===void 0?["hover"]:s,n=r.mouseEnterDelay,c=n===void 0?0:n,l=r.mouseLeaveDelay,f=l===void 0?.1:l,g=r.overlayStyle,d=r.prefixCls,m=d===void 0?"rc-tooltip":d,y=r.children,v=r.onVisibleChange,w=r.afterVisibleChange,S=r.transitionName,$=r.animation,j=r.motion,N=r.placement,p=N===void 0?"right":N,h=r.align,z=h===void 0?{}:h,P=r.destroyTooltipOnHide,b=P===void 0?!1:P,B=r.defaultVisible,T=r.getTooltipContainer,_=r.overlayInnerStyle;r.arrowContent;var C=r.overlay,k=r.id,I=r.showArrow,F=I===void 0?!0:I,Z=Le(r,Ke),M=u.useRef(null);u.useImperativeHandle(a,function(){return M.current});var X=De({},Z);"visible"in r&&(X.popupVisible=r.visible);var J=function(){return u.createElement(ue,{key:"content",prefixCls:m,id:k,overlayInnerStyle:_},C)};return u.createElement(Je,ze({popupClassName:t,prefixCls:m,popup:J,action:i,builtinPlacements:Ge,popupPlacement:p,ref:M,popupAlign:z,getPopupContainer:T,onPopupVisibleChange:v,afterPopupVisibleChange:w,popupTransitionName:S,popupAnimation:$,popupMotion:j,defaultPopupVisible:B,autoDestroy:b,mouseLeaveDelay:f,popupStyle:g,mouseEnterDelay:c,arrow:F},X),y)};const tt=u.forwardRef(et);function rt(e){const{sizePopupArrow:r,borderRadiusXS:a,borderRadiusOuter:t}=e,s=r/2,i=0,n=s,c=t*1/Math.sqrt(2),l=s-t*(1-1/Math.sqrt(2)),f=s-a*(1/Math.sqrt(2)),g=t*(Math.sqrt(2)-1)+a*(1/Math.sqrt(2)),d=2*s-f,m=g,y=2*s-c,v=l,w=2*s-i,S=n,$=s*Math.sqrt(2)+t*(Math.sqrt(2)-2),j=t*(Math.sqrt(2)-1),N=`polygon(${j}px 100%, 50% ${j}px, ${2*s-j}px 100%, ${j}px 100%)`,p=`path('M ${i} ${n} A ${t} ${t} 0 0 0 ${c} ${l} L ${f} ${g} A ${a} ${a} 0 0 1 ${d} ${m} L ${y} ${v} A ${t} ${t} 0 0 0 ${w} ${S} Z')`;return{arrowShadowWidth:$,arrowPath:p,arrowPolygon:N}}const st=(e,r,a)=>{const{sizePopupArrow:t,arrowPolygon:s,arrowPath:i,arrowShadowWidth:n,borderRadiusXS:c,calc:l}=e;return{pointerEvents:"none",width:t,height:t,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:t,height:l(t).div(2).equal(),background:r,clipPath:{_multi_value_:!0,value:[s,i]},content:'""'},"&::after":{content:'""',position:"absolute",width:n,height:n,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${ee(c)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:a,zIndex:0,background:"transparent"}}},pe=8;function fe(e){const{contentRadius:r,limitVerticalRadius:a}=e,t=r>12?r+2:12;return{arrowOffsetHorizontal:t,arrowOffsetVertical:a?pe:t}}function q(e,r){return e?r:{}}function ot(e,r,a){const{componentCls:t,boxShadowPopoverArrow:s,arrowOffsetVertical:i,arrowOffsetHorizontal:n}=e,{arrowDistance:c=0,arrowPlacement:l={left:!0,right:!0,top:!0,bottom:!0}}={};return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({[`${t}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},st(e,r,s)),{"&:before":{background:r}})]},q(!!l.top,{[[`&-placement-top > ${t}-arrow`,`&-placement-topLeft > ${t}-arrow`,`&-placement-topRight > ${t}-arrow`].join(",")]:{bottom:c,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${t}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${t}-arrow`]:{left:{_skip_check_:!0,value:n}},[`&-placement-topRight > ${t}-arrow`]:{right:{_skip_check_:!0,value:n}}})),q(!!l.bottom,{[[`&-placement-bottom > ${t}-arrow`,`&-placement-bottomLeft > ${t}-arrow`,`&-placement-bottomRight > ${t}-arrow`].join(",")]:{top:c,transform:"translateY(-100%)"},[`&-placement-bottom > ${t}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${t}-arrow`]:{left:{_skip_check_:!0,value:n}},[`&-placement-bottomRight > ${t}-arrow`]:{right:{_skip_check_:!0,value:n}}})),q(!!l.left,{[[`&-placement-left > ${t}-arrow`,`&-placement-leftTop > ${t}-arrow`,`&-placement-leftBottom > ${t}-arrow`].join(",")]:{right:{_skip_check_:!0,value:c},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${t}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${t}-arrow`]:{top:i},[`&-placement-leftBottom > ${t}-arrow`]:{bottom:i}})),q(!!l.right,{[[`&-placement-right > ${t}-arrow`,`&-placement-rightTop > ${t}-arrow`,`&-placement-rightBottom > ${t}-arrow`].join(",")]:{left:{_skip_check_:!0,value:c},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${t}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${t}-arrow`]:{top:i},[`&-placement-rightBottom > ${t}-arrow`]:{bottom:i}}))}}function at(e,r,a,t){if(t===!1)return{adjustX:!1,adjustY:!1};const s=t&&typeof t=="object"?t:{},i={};switch(e){case"top":case"bottom":i.shiftX=r.arrowOffsetHorizontal*2+a,i.shiftY=!0,i.adjustY=!0;break;case"left":case"right":i.shiftY=r.arrowOffsetVertical*2+a,i.shiftX=!0,i.adjustX=!0;break}const n=Object.assign(Object.assign({},i),s);return n.shiftX||(n.adjustX=!0),n.shiftY||(n.adjustY=!0),n}const ae={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},nt={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},it=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function lt(e){const{arrowWidth:r,autoAdjustOverflow:a,arrowPointAtCenter:t,offset:s,borderRadius:i,visibleFirst:n}=e,c=r/2,l={};return Object.keys(ae).forEach(f=>{const g=t&&nt[f]||ae[f],d=Object.assign(Object.assign({},g),{offset:[0,0],dynamicInset:!0});switch(l[f]=d,it.has(f)&&(d.autoArrow=!1),f){case"top":case"topLeft":case"topRight":d.offset[1]=-c-s;break;case"bottom":case"bottomLeft":case"bottomRight":d.offset[1]=c+s;break;case"left":case"leftTop":case"leftBottom":d.offset[0]=-c-s;break;case"right":case"rightTop":case"rightBottom":d.offset[0]=c+s;break}const m=fe({contentRadius:i,limitVerticalRadius:!0});if(t)switch(f){case"topLeft":case"bottomLeft":d.offset[0]=-m.arrowOffsetHorizontal-c;break;case"topRight":case"bottomRight":d.offset[0]=m.arrowOffsetHorizontal+c;break;case"leftTop":case"rightTop":d.offset[1]=-m.arrowOffsetHorizontal-c;break;case"leftBottom":case"rightBottom":d.offset[1]=m.arrowOffsetHorizontal+c;break}d.overflow=at(f,m,r,a),n&&(d.htmlRegion="visibleFirst")}),l}const ct=e=>{const{componentCls:r,tooltipMaxWidth:a,tooltipColor:t,tooltipBg:s,tooltipBorderRadius:i,zIndexPopup:n,controlHeight:c,boxShadowSecondary:l,paddingSM:f,paddingXS:g}=e;return[{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},Ye(e)),{position:"absolute",zIndex:n,display:"block",width:"max-content",maxWidth:a,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":s,[`${r}-inner`]:{minWidth:"1em",minHeight:c,padding:`${ee(e.calc(f).div(2).equal())} ${ee(g)}`,color:t,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:s,borderRadius:i,boxShadow:l,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${r}-inner`]:{borderRadius:e.min(i,pe)}},[`${r}-content`]:{position:"relative"}}),Qe(e,(d,m)=>{let{darkColor:y}=m;return{[`&${r}-${d}`]:{[`${r}-inner`]:{backgroundColor:y},[`${r}-arrow`]:{"--antd-arrow-background-color":y}}}})),{"&-rtl":{direction:"rtl"}})},ot(e,"var(--antd-arrow-background-color)"),{[`${r}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},ut=e=>Object.assign(Object.assign({zIndexPopup:e.zIndexPopupBase+70},fe({contentRadius:e.borderRadius,limitVerticalRadius:!0})),rt(ie(e,{borderRadiusOuter:Math.min(e.borderRadiusOuter,4)}))),de=function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Be("Tooltip",t=>{const{borderRadius:s,colorTextLightSolid:i,colorBgSpotlight:n}=t,c=ie(t,{tooltipMaxWidth:250,tooltipColor:i,tooltipBorderRadius:s,tooltipBg:n});return[ct(c),Ie(t,"zoom-big-fast")]},ut,{resetStyle:!1,injectStyle:r})(e)},pt=U.map(e=>`${e}-inverse`);function ft(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(oe(pt),oe(U)).includes(e):U.includes(e)}function me(e,r){const a=ft(r),t=H({[`${e}-${r}`]:r&&a}),s={},i={};return r&&!a&&(s.background=r,i["--antd-arrow-background-color"]=r),{className:t,overlayStyle:s,arrowStyle:i}}const dt=e=>{const{prefixCls:r,className:a,placement:t="top",title:s,color:i,overlayInnerStyle:n}=e,{getPrefixCls:c}=u.useContext(le),l=c("tooltip",r),[f,g,d]=de(l),m=me(l,i),y=m.arrowStyle,v=Object.assign(Object.assign({},n),m.overlayStyle),w=H(g,d,l,`${l}-pure`,`${l}-placement-${t}`,a,m.className);return f(u.createElement("div",{className:w,style:y},u.createElement("div",{className:`${l}-arrow`}),u.createElement(ue,Object.assign({},e,{className:g,prefixCls:l,overlayInnerStyle:v}),s)))};var mt=function(e,r){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(a[t[s]]=e[t[s]]);return a};const gt=u.forwardRef((e,r)=>{var a,t;const{prefixCls:s,openClassName:i,getTooltipContainer:n,overlayClassName:c,color:l,overlayInnerStyle:f,children:g,afterOpenChange:d,afterVisibleChange:m,destroyTooltipOnHide:y,arrow:v=!0,title:w,overlay:S,builtinPlacements:$,arrowPointAtCenter:j=!1,autoAdjustOverflow:N=!0}=e,p=!!v,[,h]=He(),{getPopupContainer:z,getPrefixCls:P,direction:b}=u.useContext(le),B=Ze(),T=u.useRef(null),_=()=>{var x;(x=T.current)===null||x===void 0||x.forceAlign()};u.useImperativeHandle(r,()=>{var x;return{forceAlign:_,forcePopupAlign:()=>{B.deprecated(!1,"forcePopupAlign","forceAlign"),_()},nativeElement:(x=T.current)===null||x===void 0?void 0:x.nativeElement}});const[C,k]=Xe(!1,{value:(a=e.open)!==null&&a!==void 0?a:e.visible,defaultValue:(t=e.defaultOpen)!==null&&t!==void 0?t:e.defaultVisible}),I=!w&&!S&&w!==0,F=x=>{var R,V;k(I?!1:x),I||((R=e.onOpenChange)===null||R===void 0||R.call(e,x),(V=e.onVisibleChange)===null||V===void 0||V.call(e,x))},Z=u.useMemo(()=>{var x,R;let V=j;return typeof v=="object"&&(V=(R=(x=v.pointAtCenter)!==null&&x!==void 0?x:v.arrowPointAtCenter)!==null&&R!==void 0?R:j),$||lt({arrowPointAtCenter:V,autoAdjustOverflow:N,arrowWidth:p?h.sizePopupArrow:0,borderRadius:h.borderRadius,offset:h.marginXXS,visibleFirst:!0})},[j,v,$,h]),M=u.useMemo(()=>w===0?w:S||w||"",[S,w]),X=u.createElement(We,null,typeof M=="function"?M():M),{getPopupContainer:J,placement:te="top",mouseEnterDelay:he=.1,mouseLeaveDelay:be=.1,overlayStyle:xe,rootClassName:ve}=e,re=mt(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),E=P("tooltip",s),we=P(),ye=e["data-popover-inject"];let Q=C;!("open"in e)&&!("visible"in e)&&I&&(Q=!1);const G=u.isValidElement(g)&&!Me(g)?g:u.createElement("span",null,g),W=G.props,je=!W.className||typeof W.className=="string"?H(W.className,i||`${E}-open`):W.className,[Oe,Se,_e]=de(E,!ye),K=me(E,l),$e=K.arrowStyle,Ne=Object.assign(Object.assign({},f),K.overlayStyle),Ce=H(c,{[`${E}-rtl`]:b==="rtl"},K.className,ve,Se,_e),[Pe,Te]=qe("Tooltip",re.zIndex),Re=u.createElement(tt,Object.assign({},re,{zIndex:Pe,showArrow:p,placement:te,mouseEnterDelay:he,mouseLeaveDelay:be,prefixCls:E,overlayClassName:Ce,overlayStyle:Object.assign(Object.assign({},$e),xe),getTooltipContainer:J||n||z,ref:T,builtinPlacements:Z,overlay:X,visible:Q,onVisibleChange:F,afterVisibleChange:d!=null?d:m,overlayInnerStyle:Ne,arrowContent:u.createElement("span",{className:`${E}-arrow-content`}),motion:{motionName:Ue(we,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!y}),Q?Ee(G,{className:je}):G);return Oe(u.createElement(Fe.Provider,{value:Te},Re))}),ge=gt;ge._InternalPanelDoNotUseOrYouWillBeFired=dt;const ne=e=>{switch(e){case"Unread":return"bg-red-100 text-red-800";case"Pending":return"bg-yellow-100 text-yellow-800";case"Completed":return"bg-green-100 text-green-800";case"Rejected":return"bg-gray-200 text-red-800";case"unseen":return"bg-red-500";case"open":return"bg-yellow-500";case"close":return"bg-green-500";case"rejected":return"bg-gray-500";default:return""}},ht=({modalContent:e,isModalVisible:r,handleModalCancel:a})=>{const t=ne(e==null?void 0:e.status),s=JSON.parse((e==null?void 0:e.assigned_users)||"{}"),i=Object.keys(s).map(n=>{var c,l;return{email:(c=s[n])==null?void 0:c.email,status:(l=s[n])==null?void 0:l.status}});return o.jsx(Ve,{open:r,onCancel:a,footer:null,className:"text-gray-700 max-w-prose",children:o.jsxs("div",{className:"m-3 max-h-[70vh] overflow-y-auto doc-temp-scroll-container",children:[o.jsx("p",{className:"mb-2 text-xl text-gray-400",children:e==null?void 0:e.subject}),o.jsxs("div",{className:"relative flex gap-3",children:[o.jsx("p",{className:`mb-4 ${t} inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium`,children:e==null?void 0:e.status}),o.jsx(ge,{title:o.jsx("div",{className:"bg-[#283C42] rounded-md",children:i.map((n,c)=>{const l=n.email===(e==null?void 0:e.rejected_by),f=l?"reject":n.status;return o.jsxs("div",{className:"flex bg-[#283C42] items-center space-x-2 text-white pl-2 pr-2",children:[o.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${ne(l?"rejected":n.status)}`}),o.jsxs("span",{children:[n.email," : ",f]})]},c)})}),placement:"top",children:o.jsx("svg",{className:"cursor-pointer",viewBox:"0 0 24 24",fill:"currentColor",height:"1.3em",width:"1.3em",children:o.jsx("path",{d:"M20.5 14.5V16H19v-1.5h1.5m-2-5H17V9a3 3 0 013-3 3 3 0 013 3c0 .97-.5 1.88-1.29 2.41l-.3.19c-.57.4-.91 1.01-.91 1.7v.2H19v-.2c0-1.19.6-2.3 1.59-2.95l.29-.19c.39-.26.62-.69.62-1.16A1.5 1.5 0 0020 7.5 1.5 1.5 0 0018.5 9v.5M9 13c2.67 0 8 1.34 8 4v3H1v-3c0-2.66 5.33-4 8-4m0-9a4 4 0 014 4 4 4 0 01-4 4 4 4 0 01-4-4 4 4 0 014-4m0 10.9c-2.97 0-6.1 1.46-6.1 2.1v1.1h12.2V17c0-.64-3.13-2.1-6.1-2.1m0-9A2.1 2.1 0 006.9 8 2.1 2.1 0 009 10.1 2.1 2.1 0 0011.1 8 2.1 2.1 0 009 5.9z"})})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"mb-2 text-lg text-gray-600 px-4 font-bold tracking-tight",children:"Description"}),o.jsx("p",{className:"text-justify text-gray-500 leading-relaxed mt-2 mb-4 px-4",dangerouslySetInnerHTML:{__html:e==null?void 0:e.description}})]}),(e==null?void 0:e.isRejected)==1&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"mb-2 text-lg text-gray-600 px-4 font-bold tracking-tight",children:"Reason"}),o.jsx("p",{className:"text-justify text-gray-500 leading-relaxed mt-2 mb-4 px-4",dangerouslySetInnerHTML:{__html:e==null?void 0:e.reject_reason}})]}),o.jsxs("p",{className:"mt-4 px-4",children:[o.jsx("strong",{children:"Timestamp:"})," ",A(e==null?void 0:e.timestamp).format("DD/MM/YYYY")," (",A(e==null?void 0:e.timestamp).fromNow(),")"]})]})})},{Option:Y}=ce,St=()=>{const e=Ae(ke),[r,a]=u.useState([]),[t,s]=u.useState(!0),[i,n]=u.useState(null),[c,l]=u.useState("all"),[f,g]=u.useState("");u.useState(null);const[d,m]=u.useState(!1),[y,v]=u.useState(null);if(u.useEffect(()=>{e&&se(void 0,null,function*(){try{const h=yield fetch(`/api/method/esign_app.api.sent_doc_by_user?user_mail=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),z=yield h.json();if(h.status===200){const P=z.message.data.map((b,B)=>{const T=JSON.parse(b.assigned_users),_={unseen:0,open:0,close:0,rejected:0};Object.values(T).forEach(k=>{k.status in _&&_[k.status]++});let C="Completed";return b.isrejected?C="Rejected":_.unseen>0?C="Unread":_.open>0&&(C="Pending"),{id:B+1,status:C,documentTitle:b.document_title,subject:b.document_subject,description:b.description,timestamp:A(b.document_created_at).toISOString(),assigned_users:b.assigned_users,name:b.name,isRejected:b.isrejected,rejected_by:b.rejected_by,reject_reason:b.reject_reason}});a(P)}else n("Failed to fetch documents")}catch(h){n("An error occurred while fetching documents")}finally{s(!1)}})},[e]),t)return o.jsx("div",{children:"Loading..."});if(i)return o.jsx("div",{children:i});const S=r.filter(p=>{switch(c){case"all":return!0;case"opened":return p.status==="Pending";case"completed":return p.status==="Completed";case"unseen":return p.status==="Unread";case"rejected":return p.status==="Rejected";default:return!0}}).filter(p=>p.documentTitle.toLowerCase().includes(f.toLowerCase())).sort((p,h)=>A(h.timestamp).unix()-A(p.timestamp).unix()),$=p=>{switch(p){case"Unread":return"bg-red-100 text-red-800";case"Pending":return"bg-yellow-100 text-yellow-800";case"Completed":return"bg-green-100 text-green-800";case"Rejected":return"bg-gray-200 text-red-800";default:return""}},j=p=>{v(p),m(!0)},N=()=>{m(!1),v(null)};return o.jsxs("div",{className:"mx-auto p-1 pt-3 w-[73vw] w-min-full",children:[o.jsxs("div",{className:"mb-4 flex gap-2 items-center max-w-10",children:[o.jsx("input",{type:"text",placeholder:"Search by document title...",value:f,onChange:p=>g(p.target.value),className:"border p-2 rounded-md flex-1"}),o.jsxs(ce,{value:c,onChange:l,className:"min-w-40 ",children:[o.jsx(Y,{value:"all",children:"All"}),o.jsx(Y,{value:"opened",children:"Opened"}),o.jsx(Y,{value:"completed",children:"Completed"}),o.jsx(Y,{value:"unseen",children:"Unseen"}),o.jsx(Y,{value:"rejected",children:"Rejected"})]})]}),o.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-y-auto max-h-[85vh] doc-temp-scroll-container",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-[#283C42] text-white sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"S.No"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Document Title"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Subject"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Timestamp"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map((p,h)=>o.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100",onClick:()=>j(p),children:[o.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:h+1}),o.jsx("td",{className:"px-6 py-4 text-sm",children:o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${$(p.status)}`,children:p.status})}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 truncate",children:p.documentTitle}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 truncate",children:p.subject}),o.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:[A(p.timestamp).format("DD/MM/YYYY")," (",A(p.timestamp).fromNow(),")"]})]},p.id))})]})}),o.jsx(ht,{modalContent:y,isModalVisible:d,handleModalCancel:N})]})};export{St as default};
